<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OtoAnaliz AI | 100+ Kritik GÃ¶sterge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            transition: background-color 0.3s, color 0.3s;
        }
        .dark-mode { 
            background-color: #0f172a !important; 
            color: #f1f5f9 !important; 
        }
        .dark-mode .dark-card { 
            background-color: #1e293b !important; 
            border-color: #334155 !important; 
        }
        .light-card { 
            transition: all 0.3s ease; 
            cursor: pointer; 
        }
        .light-card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); 
        }
        .dark-mode .light-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
        }
        .category-btn.active { 
            background: #2563eb; 
            color: white; 
        }
        .level-critical { background: #dc2626; color: white; }
        .level-danger { background: #ea580c; color: white; }
        .level-warning { background: #f59e0b; color: black; }
        .level-info { background: #3b82f6; color: white; }
        .level-success { background: #10b981; color: white; }
        .note-item { transition: all 0.2s; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen" id="body">
    <!-- Profil ModalÄ± -->
    <div id="profileModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 hidden">
        <div class="bg-white dark:bg-gray-800 w-full max-w-2xl rounded-2xl p-6 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold dark:text-white">ğŸ‘¤ Profilim</h2>
                <button onclick="closeProfile()" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300">âœ•</button>
            </div>
            
            <!-- KullanÄ±cÄ± Bilgileri -->
            <div id="userInfo" class="mb-8">
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                        <span id="userInitial" class="text-2xl font-bold text-blue-600 dark:text-blue-300">U</span>
                    </div>
                    <div>
                        <h3 id="userName" class="text-lg font-bold dark:text-white">KullanÄ±cÄ±</h3>
                        <p id="userEmail" class="text-gray-600 dark:text-gray-400">email@example.com</p>
                    </div>
                </div>
            </div>
            
            <!-- Notlar BÃ¶lÃ¼mÃ¼ -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-lg dark:text-white">ğŸ“ NotlarÄ±m</h3>
                    <button onclick="addNewNote()" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700">+ Yeni Not</button>
                </div>
                
                <div id="notesList" class="space-y-3">
                    <!-- Notlar buraya eklenecek -->
                </div>
            </div>
            
            <!-- Ã‡Ä±kÄ±ÅŸ Butonu -->
            <button onclick="logout()" class="w-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 py-3 rounded-lg font-semibold hover:bg-red-200 dark:hover:bg-red-900/50">
                ğŸšª Ã‡Ä±kÄ±ÅŸ Yap
            </button>
        </div>
    </div>

    <!-- GiriÅŸ ModalÄ± -->
    <div id="loginModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 hidden">
        <div class="bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold dark:text-white">ğŸ” GiriÅŸ Yap</h2>
                <button onclick="closeLogin()" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300">âœ•</button>
            </div>
            
            <form id="loginForm" onsubmit="handleLogin(event)">
                <input type="email" id="loginEmail" placeholder="E-posta" required class="w-full p-3 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg mb-3">
                <input type="password" id="loginPassword" placeholder="Åifre" required class="w-full p-3 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg mb-4">
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700">
                    GiriÅŸ Yap
                </button>
            </form>
            
            <p class="text-sm text-gray-600 dark:text-gray-400 text-center mt-4">
                HesabÄ±n yok mu? 
                <button onclick="switchToRegister()" class="text-blue-600 dark:text-blue-400 font-semibold">KayÄ±t Ol</button>
            </p>
        </div>
    </div>

    <!-- KayÄ±t ModalÄ± -->
    <div id="registerModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 hidden">
        <div class="bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold dark:text-white">ğŸ“ KayÄ±t Ol</h2>
                <button onclick="closeRegister()" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300">âœ•</button>
            </div>
            
            <form id="registerForm" onsubmit="handleRegister(event)">
                <input type="text" id="regName" placeholder="Ad Soyad" required class="w-full p-3 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg mb-3">
                <input type="email" id="regEmail" placeholder="E-posta" required class="w-full p-3 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg mb-3">
                <input type="password" id="regPassword" placeholder="Åifre (min. 6 karakter)" required minlength="6" class="w-full p-3 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg mb-3">
                <input type="tel" id="regPhone" placeholder="Telefon (opsiyonel)" class="w-full p-3 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg mb-4">
                
                <div class="flex items-center mb-4">
                    <input type="checkbox" id="terms" required class="mr-2">
                    <label for="terms" class="text-sm text-gray-600 dark:text-gray-400">
                        <button type="button" onclick="showTerms()" class="text-blue-600 dark:text-blue-400">KullanÄ±m KoÅŸullarÄ±</button>'nÄ± kabul ediyorum
                    </label>
                </div>
                
                <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700">
                    Hesap OluÅŸtur
                </button>
            </form>
            
            <p class="text-sm text-gray-600 dark:text-gray-400 text-center mt-4">
                Zaten hesabÄ±n var mÄ±? 
                <button onclick="switchToLogin()" class="text-blue-600 dark:text-blue-400 font-semibold">GiriÅŸ Yap</button>
            </p>
        </div>
    </div>

    <!-- Navbar -->
    <nav id="navbar" class="sticky top-0 z-40 bg-white dark:bg-gray-900 border-b dark:border-gray-700 px-6 py-4 transition-colors duration-300">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-blue-600 p-2 rounded-lg">
                    <span class="text-white text-xl">ğŸš—</span>
                </div>
                <h1 class="text-xl font-black dark:text-white transition-colors duration-300">OTO<span class="text-blue-600">ANALÄ°Z</span></h1>
                <span class="text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-2 py-1 rounded font-bold">100+ ArÄ±za</span>
            </div>
            
            <div class="flex items-center gap-3">
                <!-- KaranlÄ±k/AÃ§Ä±k Mod Butonu -->
                <button id="themeToggle" onclick="toggleTheme()" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                    <span id="themeIcon" class="text-lg">ğŸŒ™</span>
                </button>
                
                <!-- KullanÄ±cÄ± Butonu -->
                <button id="userButton" onclick="showProfile()" class="bg-blue-600 text-white px-5 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-300">
                    GiriÅŸ Yap
                </button>
            </div>
        </div>
    </nav>

    <!-- Ana Ä°Ã§erik -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 py-8">
        <!-- BaÅŸlÄ±k -->
        <div class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-black text-gray-900 dark:text-white mb-4 transition-colors duration-300">
                100+ AraÃ§ ArÄ±za GÃ¶stergesi
            </h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto transition-colors duration-300">
                TÃ¼m araÃ§ arÄ±za lambalarÄ±, anlamlarÄ± ve Ã§Ã¶zÃ¼m Ã¶nerileri. 
                En kapsamlÄ± TÃ¼rkÃ§e arÄ±za rehberi!
            </p>
        </div>

        <!-- Filtre ButonlarÄ± -->
        <div class="flex flex-wrap gap-2 mb-8 justify-center">
            <button onclick="filterLights('all')" class="category-btn active px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white">
                ğŸ”¥ Hepsi (100+)
            </button>
            <button onclick="filterLights('motor')" class="category-btn px-4 py-2 rounded-lg text-sm font-semibold bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                âš™ï¸ Motor
            </button>
            <button onclick="filterLights('guvenlik')" class="category-btn px-4 py-2 rounded-lg text-sm font-semibold bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                ğŸ›¡ï¸ GÃ¼venlik
            </button>
            <button onclick="filterLights('aydinlatma')" class="category-btn px-4 py-2 rounded-lg text-sm font-semibold bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                ğŸ’¡ AydÄ±nlatma
            </button>
            <button onclick="filterLights('mekanik')" class="category-btn px-4 py-2 rounded-lg text-sm font-semibold bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                ğŸ”§ Mekanik
            </button>
            <button onclick="filterLights('hava')" class="category-btn px-4 py-2 rounded-lg text-sm font-semibold bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                ğŸŒ§ï¸ Hava/Yol
            </button>
            <button onclick="filterLights('fren')" class="category-btn px-4 py-2 rounded-lg text-sm font-semibold bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                ğŸš¦ Fren
            </button>
            <button onclick="filterLights('dizel')" class="category-btn px-4 py-2 rounded-lg text-sm font-semibold bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300">
                â›½ Dizel
            </button>
        </div>

        <!-- Arama Kutusu -->
        <div class="mb-8 max-w-md mx-auto">
            <input type="text" id="searchInput" placeholder="ğŸ” ArÄ±za ara..." 
                   class="w-full p-3 rounded-lg border dark:border-gray-600 dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- ArÄ±za KartlarÄ± Grid -->
        <div id="lightsGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
            <!-- Kartlar buraya JavaScript ile eklenecek -->
        </div>

        <!-- Ä°statistik -->
        <div class="mt-12 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center">
            <p class="text-sm text-gray-600 dark:text-gray-400">
                Toplam <span id="totalCount" class="font-bold text-blue-600 dark:text-blue-400">100+</span> arÄ±za gÃ¶sterge, 
                <span id="criticalCount" class="font-bold text-red-600 dark:text-red-400">25</span> kritik, 
                <span id="warningCount" class="font-bold text-yellow-600 dark:text-yellow-400">45</span> uyarÄ±
            </p>
        </div>

        <!-- Detay Modal -->
        <div id="detailModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 hidden">
            <div class="bg-white dark:bg-gray-800 w-full max-w-lg rounded-2xl overflow-hidden transition-colors duration-300 max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span id="modalIcon" class="text-4xl"></span>
                            <h2 id="modalTitle" class="text-xl font-black mt-2 dark:text-white transition-colors duration-300"></h2>
                            <span id="modalLevel" class="inline-block px-3 py-1 rounded-full text-xs font-bold mt-2"></span>
                        </div>
                        <button onclick="closeModal()" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-300">âœ•</button>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-900 dark:text-gray-300 mb-2 transition-colors duration-300">ğŸ“ AÃ§Ä±klama</h3>
                        <p id="modalDesc" class="text-gray-600 dark:text-gray-400 transition-colors duration-300 text-sm"></p>
                    </div>
                    
                    <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg transition-colors duration-300 mb-4">
                        <h3 class="font-semibold text-blue-900 dark:text-blue-300 mb-2 transition-colors duration-300">ğŸš¨ Acil Ã‡Ã¶zÃ¼m</h3>
                        <p id="modalAction" class="text-gray-800 dark:text-gray-300 transition-colors duration-300 text-sm"></p>
                    </div>
                    
                    <!-- Not Ekle Butonu (Sadece giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±lar iÃ§in) -->
                    <div id="addNoteSection" class="mt-4 hidden">
                        <button onclick="addNoteToFault()" class="text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-lg transition-colors duration-300">
                            ğŸ“Œ Bu arÄ±zaya not ekle
                        </button>
                    </div>
                    
                    <div class="mt-6 text-sm text-gray-500 dark:text-gray-400 transition-colors duration-300">
                        <p>âš ï¸ Bu bilgiler genel tavsiyedir. Her araÃ§ iÃ§in farklÄ± olabilir.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // LOCAL STORAGE YÃ–NETÄ°MÄ°
        const STORAGE_KEYS = {
            USERS: 'otoanaliz_users',
            CURRENT_USER: 'otoanaliz_current_user',
            NOTES: 'otoanaliz_notes',
            THEME: 'otoanaliz_theme'
        };

        // KullanÄ±cÄ± verilerini saklama
        let users = JSON.parse(localStorage.getItem(STORAGE_KEYS.USERS)) || [];
        let currentUser = JSON.parse(localStorage.getItem(STORAGE_KEYS.CURRENT_USER)) || null;
        let userNotes = JSON.parse(localStorage.getItem(STORAGE_KEYS.NOTES)) || [];
        let currentTheme = localStorage.getItem(STORAGE_KEYS.THEME) || 'light';

        // TEMA YÃ–NETÄ°MÄ°
        function initTheme() {
            const body = document.getElementById('body');
            const themeIcon = document.getElementById('themeIcon');
            
            if (currentTheme === 'dark') {
                body.classList.add('dark-mode');
                themeIcon.textContent = 'â˜€ï¸';
                // Dark class'larÄ±nÄ± ekle
                document.querySelectorAll('[class*="dark:"]').forEach(el => {
                    const classes = el.className.split(' ');
                    classes.forEach(cls => {
                        if (cls.startsWith('dark:')) {
                            const lightClass = cls.replace('dark:', '');
                            el.classList.remove(lightClass);
                            el.classList.add(cls);
                        }
                    });
                });
            } else {
                body.classList.remove('dark-mode');
                themeIcon.textContent = 'ğŸŒ™';
            }
        }

        function toggleTheme() {
            const body = document.getElementById('body');
            const themeIcon = document.getElementById('themeIcon');
            
            if (body.classList.contains('dark-mode')) {
                // AÃ§Ä±k moda geÃ§
                body.classList.remove('dark-mode');
                currentTheme = 'light';
                themeIcon.textContent = 'ğŸŒ™';
            } else {
                // KaranlÄ±k moda geÃ§
                body.classList.add('dark-mode');
                currentTheme = 'dark';
                themeIcon.textContent = 'â˜€ï¸';
            }
            
            localStorage.setItem(STORAGE_KEYS.THEME, currentTheme);
            // SayfayÄ± yeniden render et
            renderLights(currentFilter);
        }

        // KullanÄ±cÄ± iÅŸlemleri
        function handleRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('regName').value.trim();
            const email = document.getElementById('regEmail').value.trim().toLowerCase();
            const password = document.getElementById('regPassword').value;
            const phone = document.getElementById('regPhone').value.trim();
            
            // E-posta kontrolÃ¼
            if (!isValidEmail(email)) {
                alert('GeÃ§erli bir e-posta adresi girin!');
                return;
            }
            
            // Åifre kontrolÃ¼
            if (password.length < 6) {
                alert('Åifre en az 6 karakter olmalÄ±dÄ±r!');
                return;
            }
            
            // KullanÄ±cÄ± var mÄ± kontrolÃ¼
            if (users.some(user => user.email === email)) {
                alert('Bu e-posta adresi ile zaten kayÄ±tlÄ± bir hesap var!');
                return;
            }
            
            // Yeni kullanÄ±cÄ± oluÅŸtur
            const newUser = {
                id: Date.now(),
                name: name,
                email: email,
                password: password,
                phone: phone,
                createdAt: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users));
            
            alert(`HoÅŸ geldin ${name}! HesabÄ±n baÅŸarÄ±yla oluÅŸturuldu.`);
            switchToLogin();
        }

        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value.trim().toLowerCase();
            const password = document.getElementById('loginPassword').value;
            
            // KullanÄ±cÄ±yÄ± bul
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem(STORAGE_KEYS.CURRENT_USER, JSON.stringify(currentUser));
                
                // KullanÄ±cÄ± notlarÄ±nÄ± yÃ¼kle
                userNotes = JSON.parse(localStorage.getItem(STORAGE_KEYS.NOTES)) || [];
                
                closeLogin();
                updateUI();
                alert(`HoÅŸ geldin ${user.name}!`);
            } else {
                alert('E-posta veya ÅŸifre hatalÄ±!');
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem(STORAGE_KEYS.CURRENT_USER);
            closeProfile();
            updateUI();
            alert('BaÅŸarÄ±yla Ã§Ä±kÄ±ÅŸ yapÄ±ldÄ±.');
        }

        // Not iÅŸlemleri
        function addNewNote() {
            const noteText = prompt('Notunuzu yazÄ±n:');
            if (noteText && noteText.trim()) {
                const newNote = {
                    id: Date.now(),
                    userId: currentUser.id,
                    text: noteText.trim(),
                    createdAt: new Date().toISOString(),
                    relatedFault: null
                };
                
                userNotes.push(newNote);
                localStorage.setItem(STORAGE_KEYS.NOTES, JSON.stringify(userNotes));
                loadUserNotes();
            }
        }

        function addNoteToFault() {
            const faultTitle = document.getElementById('modalTitle').textContent;
            const noteText = prompt(`"${faultTitle}" ile ilgili notunuz:`, '');
            
            if (noteText && noteText.trim()) {
                const newNote = {
                    id: Date.now(),
                    userId: currentUser.id,
                    text: noteText.trim(),
                    createdAt: new Date().toISOString(),
                    relatedFault: faultTitle
                };
                
                userNotes.push(newNote);
                localStorage.setItem(STORAGE_KEYS.NOTES, JSON.stringify(userNotes));
                loadUserNotes();
                alert('Not kaydedildi!');
            }
        }

        function deleteNote(noteId) {
            if (confirm('Bu notu silmek istediÄŸinize emin misiniz?')) {
                userNotes = userNotes.filter(note => note.id !== noteId);
                localStorage.setItem(STORAGE_KEYS.NOTES, JSON.stringify(userNotes));
                loadUserNotes();
            }
        }

        function loadUserNotes() {
            if (!currentUser) return;
            
            const notesList = document.getElementById('notesList');
            const userNotesFiltered = userNotes.filter(note => note.userId === currentUser.id);
            
            if (userNotesFiltered.length === 0) {
                notesList.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center py-4">HenÃ¼z notunuz yok.</p>';
                return;
            }
            
            notesList.innerHTML = userNotesFiltered.map(note => `
                <div class="note-item bg-gray-50 dark:bg-gray-700 p-3 rounded-lg transition-colors duration-300">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <p class="text-gray-800 dark:text-gray-300 mb-1 transition-colors duration-300">${note.text}</p>
                            ${note.relatedFault ? 
                                `<span class="inline-block bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 text-xs px-2 py-1 rounded transition-colors duration-300">${note.relatedFault}</span>` : 
                                ''
                            }
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2 transition-colors duration-300">
                                ${new Date(note.createdAt).toLocaleDateString('tr-TR')}
                            </p>
                        </div>
                        <button onclick="deleteNote(${note.id})" class="text-red-500 hover:text-red-700 ml-2 transition-colors duration-300">âœ•</button>
                    </div>
                </div>
            `).join('');
        }

        // UI gÃ¼ncelleme
        function updateUI() {
            const userButton = document.getElementById('userButton');
            const addNoteSection = document.getElementById('addNoteSection');
            
            if (currentUser) {
                userButton.textContent = 'ğŸ‘¤ Profil';
                userButton.onclick = showProfile;
                addNoteSection.classList.remove('hidden');
                
                // Profil bilgilerini gÃ¼ncelle
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userInitial').textContent = currentUser.name.charAt(0).toUpperCase();
                
                loadUserNotes();
            } else {
                userButton.textContent = 'GiriÅŸ Yap';
                userButton.onclick = showLogin;
                addNoteSection.classList.add('hidden');
            }
        }

        // YardÄ±mcÄ± fonksiyonlar
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function showProfile() {
            if (!currentUser) {
                showLogin();
                return;
            }
            document.getElementById('profileModal').classList.remove('hidden');
        }

        function closeProfile() {
            document.getElementById('profileModal').classList.add('hidden');
        }

        function showLogin() {
            closeAllModals();
            document.getElementById('loginModal').classList.remove('hidden');
        }

        function closeLogin() {
            document.getElementById('loginModal').classList.add('hidden');
        }

        function switchToRegister() {
            closeLogin();
            document.getElementById('registerModal').classList.remove('hidden');
        }

        function switchToLogin() {
            closeRegister();
            document.getElementById('loginModal').classList.remove('hidden');
        }

        function closeRegister() {
            document.getElementById('registerModal').classList.add('hidden');
        }

        function closeAllModals() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('registerModal').classList.add('hidden');
            document.getElementById('profileModal').classList.add('hidden');
            document.getElementById('detailModal').classList.add('hidden');
        }

        function showTerms() {
            alert('KullanÄ±m KoÅŸullarÄ±:\n\n1. Bu site eÄŸitim amaÃ§lÄ±dÄ±r.\n2. Verileriniz tarayÄ±cÄ±da saklanÄ±r.\n3. GerÃ§ek bir otomotiv uygulamasÄ± deÄŸildir.');
        }

        // ARIZA VERÄ°LERÄ° - TÃœM YENÄ° ARIZALAR EKLENDÄ°!
        const arÄ±zaData = [
            // MOTOR ARIZALARI
            { 
                cat: 'motor', 
                title: 'Hararet Ä°kaz LambasÄ±', 
                icon: 'ğŸŒ¡ï¸', 
                level: 'critical', 
                desc: 'Motor sÄ±caklÄ±ÄŸÄ±nÄ±n olmasÄ± gerekenden fazla olduÄŸu anlamÄ±na gelir.', 
                action: 'AracÄ± durdurup motorun soÄŸumasÄ±nÄ± bekleyin. SoÄŸutma suyu seviyesi, fan Ã§alÄ±ÅŸmasÄ±, radyatÃ¶r kapaÄŸÄ± ve kaÃ§aklarÄ± kontrol edin.' 
            },
            { 
                cat: 'motor', 
                title: 'AkÃ¼ Sistemi Ä°kaz LambasÄ±', 
                icon: 'ğŸ”‹', 
                level: 'danger', 
                desc: 'AkÃ¼de veya alternatÃ¶rde sorun olduÄŸunu gÃ¶sterir.', 
                action: 'Elektrikli aksamlarÄ± kapatÄ±p servise gidin. MarÅŸ basmadan Ã¶nce ÅŸarj sistemini kontrol ettirin.' 
            },
            { 
                cat: 'motor', 
                title: 'YaÄŸ BasÄ±ncÄ± Ä°kaz LambasÄ±', 
                icon: 'ğŸ›¢ï¸', 
                level: 'critical', 
                desc: 'Motor yaÄŸ basÄ±ncÄ± Ã§ok dÃ¼ÅŸÃ¼k. Motor aÅŸÄ±rÄ± Ä±sÄ±nabilir.', 
                action: 'Hemen durun, motoru kapatÄ±n. YaÄŸ seviyesini ve basÄ±ncÄ±nÄ± kontrol edin.' 
            },
            { 
                cat: 'motor', 
                title: 'Motor ARIZA LambasÄ±', 
                icon: 'âš™ï¸', 
                level: 'critical', 
                desc: 'Motor yÃ¶netim sisteminde ciddi bir hata var.', 
                action: 'Hemen servise gidin! Motor performansÄ± sÄ±nÄ±rlanmÄ±ÅŸ olabilir.' 
            },
            { 
                cat: 'motor', 
                title: 'Egzoz ARIZASI', 
                icon: 'ğŸ’¨', 
                level: 'warning', 
                desc: 'Egzoz emisyon deÄŸerleri normalin Ã¼zerinde.', 
                action: 'En kÄ±sa sÃ¼rede servise gidin, yakÄ±t tÃ¼ketimi artabilir.' 
            },
            { 
                cat: 'motor', 
                title: 'EGR ARIZASI', 
                icon: 'ğŸ”„', 
                level: 'warning', 
                desc: 'Egzoz gazÄ± devridaim sistemi arÄ±zalÄ±.', 
                action: 'YakÄ±t tÃ¼ketimi artabilir, servise gidin.' 
            },
            { 
                cat: 'motor', 
                title: 'Turbo BasÄ±ncÄ±', 
                icon: 'ğŸ’¨', 
                level: 'danger', 
                desc: 'Turbo ÅŸarj basÄ±ncÄ± dÃ¼ÅŸÃ¼k. Motor gÃ¼cÃ¼ azalÄ±r.', 
                action: 'Servise gidin, turbo hortumlarÄ±nÄ± kontrol ettirin.' 
            },
            { 
                cat: 'motor', 
                title: 'TÄ±kanmÄ±ÅŸ Hava Filtresi', 
                icon: 'ğŸŒ¬ï¸', 
                level: 'warning', 
                desc: 'Motora giden hava akÄ±ÅŸÄ± ciddi derecede azaldÄ±.', 
                action: 'Hava filtrenizi temizleyin veya deÄŸiÅŸtirin.' 
            },
            { 
                cat: 'motor', 
                title: 'Katalitik KonvertÃ¶r', 
                icon: 'ğŸ”¥', 
                level: 'danger', 
                desc: 'Egzoz sisteminde sorun. AÅŸÄ±rÄ± Ä±sÄ±nma veya hasar olabilir.', 
                action: 'Hemen servise gidin, performans dÃ¼ÅŸer.' 
            },
            { 
                cat: 'motor', 
                title: 'Servis ArÄ±zasÄ± Ä°kaz', 
                icon: 'ğŸ› ï¸', 
                level: 'info', 
                desc: 'Kilometre bakÄ±mÄ±nÄ±n yaklaÅŸtÄ±ÄŸÄ±nÄ± hatÄ±rlatÄ±r.', 
                action: 'AracÄ±nÄ±zÄ± bakÄ±ma almanÄ±z gerekiyor.' 
            },

            // FREN SÄ°STEMÄ°
            { 
                cat: 'fren', 
                title: 'Fren Ä°kaz LambasÄ±', 
                icon: 'ğŸ…¿ï¸', 
                level: 'warning', 
                desc: 'El freni Ã§ekili veya fren sistemi hatasÄ±. Hidrolik basÄ±nÃ§ kaybÄ± olabilir.', 
                action: 'El frenini kontrol edin. Yanmaya devam ediyorsa fren sistemini kontrol ettirin.' 
            },
            { 
                cat: 'fren', 
                title: 'Fren BalatasÄ± Ä°kaz', 
                icon: 'â­•', 
                level: 'warning', 
                desc: 'Fren balatalarÄ± fazlasÄ±yla aÅŸÄ±nmÄ±ÅŸ, deÄŸiÅŸtirilmesi gerek.', 
                action: 'En geÃ§ 500 km iÃ§inde balatalarÄ± deÄŸiÅŸtirin.' 
            },
            { 
                cat: 'fren', 
                title: 'Fren HidroliÄŸi Ä°kaz', 
                icon: 'ğŸ’§', 
                level: 'danger', 
                desc: 'Fren hidrolik seviyesi standardÄ±n altÄ±na dÃ¼ÅŸtÃ¼.', 
                action: 'Hemen fren hidroliÄŸi ekleyin veya servise gidin.' 
            },
            { 
                cat: 'fren', 
                title: 'Fren PedalÄ± Ä°kaz', 
                icon: 'ğŸ‘£', 
                level: 'danger', 
                desc: 'Fren sisteminde arÄ±za oluÅŸtu.', 
                action: 'Hemen servise baÅŸvurun, frenleme performansÄ± dÃ¼ÅŸebilir.' 
            },
            { 
                cat: 'fren', 
                title: 'Fren Tutma Ä°kaz', 
                icon: 'â¸ï¸', 
                level: 'info', 
                desc: 'Fren tutma sisteminin dÃ¼zgÃ¼n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± gÃ¶sterir.', 
                action: 'Normal Ã§alÄ±ÅŸma, mÃ¼dahale gerekmez.' 
            },
            { 
                cat: 'fren', 
                title: 'Fren LambasÄ± Ä°kaz', 
                icon: 'ğŸ’¡', 
                level: 'warning', 
                desc: 'Fren lambalarÄ±nÄ±z Ã§alÄ±ÅŸmÄ±yor.', 
                action: 'Fren lambalarÄ±nÄ±zÄ± mutlaka kontrol ettirin.' 
            },
            { 
                cat: 'fren', 
                title: 'Elektrikli Park Freni', 
                icon: 'ğŸ”Œ', 
                level: 'warning', 
                desc: 'Elektrikli park freninde sorun var.', 
                action: 'Servise baÅŸvurun, park freni Ã§alÄ±ÅŸmayabilir.' 
            },
            { 
                cat: 'fren', 
                title: 'ABS Ä°kaz LambasÄ±', 
                icon: 'ğŸš«', 
                level: 'warning', 
                desc: 'Fren kilitlenme Ã¶nleyici sistem devre dÄ±ÅŸÄ± veya arÄ±zalÄ±.', 
                action: 'Sert fren yapmaktan kaÃ§Ä±nÄ±n, kontrollÃ¼ sÃ¼rÃ¼n.' 
            },

            // GÃœVENLÄ°K SÄ°STEMLERÄ°
            { 
                cat: 'guvenlik', 
                title: 'AIRBAG ARIZASI', 
                icon: 'ğŸ’¥', 
                level: 'danger', 
                desc: 'Hava yastÄ±ÄŸÄ± sistemi devre dÄ±ÅŸÄ±. Kazalarda aÃ§Ä±lmayabilir.', 
                action: 'Hemen servise gidin, can gÃ¼venliÄŸi riski!' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Yan Hava YastÄ±ÄŸÄ± Ä°kaz', 
                icon: 'ğŸ›¡ï¸', 
                level: 'danger', 
                desc: 'Yan hava yastÄ±klarÄ± devre dÄ±ÅŸÄ± kaldÄ± veya arÄ±zalÄ±.', 
                action: 'Hava yastÄ±ÄŸÄ± sistemini kontrol ettirin.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Hava YastÄ±ÄŸÄ± Devre DÄ±ÅŸÄ±', 
                icon: 'ğŸš«', 
                level: 'warning', 
                desc: 'Hava yastÄ±ÄŸÄ± sisteminiz devre dÄ±ÅŸÄ±.', 
                action: 'Sistemi aktif hale getirin veya servise gidin.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'ESC/ESP Ä°kaz LambasÄ±', 
                icon: 'ğŸ”„', 
                level: 'warning', 
                desc: 'Denge kontrol sistemi aktif veya devre dÄ±ÅŸÄ±.', 
                action: '"OFF" yazÄ±yorsa sistem devre dÄ±ÅŸÄ±, gÃ¼venli sÃ¼rÃ¼ÅŸ yapÄ±n.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Ã‡ekiÅŸ KontrolÃ¼ Ä°kaz', 
                icon: 'ğŸš—', 
                level: 'warning', 
                desc: 'AracÄ±n Ã§ekiÅŸ kontrolÃ¼nde problem var.', 
                action: 'Kaygan zeminde dikkatli sÃ¼rÃ¼n, sistem arÄ±zalÄ± olabilir.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Park Freni Ä°kaz', 
                icon: 'â“…', 
                level: 'info', 
                desc: 'Otomatik vites araÃ§larda vites park konumunda.', 
                action: 'Normal Ã§alÄ±ÅŸma, mÃ¼dahale gerekmez.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Ã‡ocuk GÃ¼venlik Kilidi', 
                icon: 'ğŸ‘¶', 
                level: 'info', 
                desc: 'Ã‡ocuk gÃ¼venlik kilidi etkin.', 
                action: 'Arka kapÄ±lar iÃ§eriden aÃ§Ä±lamaz, normal Ã§alÄ±ÅŸma.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Takip Mesafesi Ä°kaz', 
                icon: 'ğŸ“', 
                level: 'warning', 
                desc: 'GÃ¼venli takip mesafesi aÅŸÄ±ldÄ±.', 
                action: 'Ã–nÃ¼nÃ¼zdeki araÃ§ ile aranÄ±zÄ± aÃ§Ä±n.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Ä°leri Ã‡arpÄ±ÅŸma Ä°kaz', 
                icon: 'âš ï¸', 
                level: 'danger', 
                desc: 'OlasÄ± bir Ã§arpÄ±ÅŸma tespit edildi.', 
                action: 'Fren yapÄ±n ve gÃ¼venli mesafe bÄ±rakÄ±n.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'KÃ¶r Nokta Ä°kaz', 
                icon: 'ğŸ‘ï¸', 
                level: 'warning', 
                desc: 'KÃ¶r noktanÄ±zda araÃ§ veya engel tespit edildi.', 
                action: 'Åerit deÄŸiÅŸtirmeyin, dikkatli olun.' 
            },

            // AYDINLATMA
            { 
                cat: 'aydinlatma', 
                title: 'KÄ±sa Far Ä°kaz', 
                icon: 'ğŸ’¡', 
                level: 'info', 
                desc: 'KÄ±sa farlar aÃ§Ä±k.', 
                action: 'Gereksizse kapatÄ±n, batarya tÃ¼ketimini azaltÄ±n.' 
            },
            { 
                cat: 'aydinlatma', 
                title: 'Uzun Far Ä°kaz', 
                icon: 'ğŸ”¦', 
                level: 'info', 
                desc: 'Uzun farlar aÃ§Ä±k.', 
                action: 'KarÅŸÄ±dan araÃ§ geliyorsa kÄ±sa farlara geÃ§in.' 
            },
            { 
                cat: 'aydinlatma', 
                title: 'Far Seviyesi Ä°kaz', 
                icon: 'ğŸ“', 
                level: 'warning', 
                desc: 'Far seviyesi kontrol sisteminde arÄ±za.', 
                action: 'Far ayarlarÄ±nÄ± kontrol ettirin.' 
            },
            { 
                cat: 'aydinlatma', 
                title: 'Ã–n Sis LambasÄ±', 
                icon: 'ğŸŒ«ï¸', 
                level: 'info', 
                desc: 'Ã–n sis lambalarÄ± aÃ§Ä±k.', 
                action: 'Sis yoksa kapatÄ±n, diÄŸer sÃ¼rÃ¼cÃ¼leri rahatsÄ±z etmeyin.' 
            },
            { 
                cat: 'aydinlatma', 
                title: 'Arka Sis LambasÄ±', 
                icon: 'ğŸ”´', 
                level: 'info', 
                desc: 'Arka sis lambalarÄ± aÃ§Ä±k.', 
                action: 'Sadece yoÄŸun siste kullanÄ±n, arkadan gelenleri rahatsÄ±z etmeyin.' 
            },
            { 
                cat: 'aydinlatma', 
                title: 'DÄ±ÅŸ AydÄ±nlatma Ä°kaz', 
                icon: 'ğŸš¨', 
                level: 'warning', 
                desc: 'DÄ±ÅŸ Ä±ÅŸÄ±klardan en az biri arÄ±zalÄ±.', 
                action: 'TÃ¼m dÄ±ÅŸ Ä±ÅŸÄ±klarÄ± kontrol edin, ampul deÄŸiÅŸtirin.' 
            },
            { 
                cat: 'aydinlatma', 
                title: 'Adaptif Far Ä°kaz', 
                icon: 'ğŸ¤–', 
                level: 'info', 
                desc: 'Adaptif far sistemi aktif.', 
                action: 'Sistem otomatik olarak far ayarÄ± yapar.' 
            },
            { 
                cat: 'aydinlatma', 
                title: 'Otomatik Uzun Far', 
                icon: 'âš¡', 
                level: 'info', 
                desc: 'Otomatik uzun far sistemi aktif.', 
                action: 'Sistem otomatik olarak uzun/kÄ±sa geÃ§iÅŸ yapar.' 
            },

            // MEKANÄ°K
            { 
                cat: 'mekanik', 
                title: 'Direksiyon Kilidi', 
                icon: 'ğŸ”’', 
                level: 'danger', 
                desc: 'Direksiyon simidi kilitli ve hareket ettirilemiyor.', 
                action: 'AnahtarÄ± kontaÄŸa takÄ±n, direksiyonu tam tur Ã§evirmeyi deneyin.' 
            },
            { 
                cat: 'mekanik', 
                title: 'ÅanzÄ±man ARIZASI', 
                icon: 'âš¡', 
                level: 'critical', 
                desc: 'Vites kutusunda ciddi arÄ±za. Vites geÃ§iÅŸleri zorlaÅŸabilir.', 
                action: 'Hemen servise Ã§ekici ile gÃ¶tÃ¼rÃ¼n.' 
            },
            { 
                cat: 'mekanik', 
                title: 'Lastik BasÄ±nÃ§ Ä°kaz', 
                icon: 'ğŸŒ€', 
                level: 'warning', 
                desc: 'Lastiklerden en az birinin basÄ±ncÄ± dÃ¼ÅŸÃ¼k.', 
                action: 'Lastik basÄ±nÃ§larÄ±nÄ± kontrol edin, hava basÄ±n.' 
            },
            { 
                cat: 'mekanik', 
                title: 'SÃ¼spansiyon AmortisÃ¶rÃ¼', 
                icon: 'ğŸï¸', 
                level: 'warning', 
                desc: 'SÃ¼spansiyon sisteminde sorun var.', 
                action: 'YavaÅŸ sÃ¼rÃ¼n, engebeli yollardan kaÃ§Ä±nÄ±n.' 
            },
            { 
                cat: 'mekanik', 
                title: 'Hava SÃ¼spansiyonu', 
                icon: 'ğŸ’¨', 
                level: 'warning', 
                desc: 'Hava sÃ¼spansiyonunda sorun var.', 
                action: 'Seyir yÃ¼ksekliÄŸi deÄŸiÅŸebilir, servise gidin.' 
            },
            { 
                cat: 'mekanik', 
                title: '4WD Ä°kaz LambasÄ±', 
                icon: 'ğŸšœ', 
                level: 'warning', 
                desc: '4 Ã§eker sisteminde arÄ±za var.', 
                action: 'Sistem devre dÄ±ÅŸÄ± olabilir, dikkatli sÃ¼rÃ¼n.' 
            },
            { 
                cat: 'mekanik', 
                title: 'Otomatik Vites Ä°kaz', 
                icon: 'ğŸ”„', 
                level: 'danger', 
                desc: 'ÅanzÄ±man sisteminde arÄ±za.', 
                action: 'Servisinizi arayÄ±n, vites deÄŸiÅŸiminde sorun yaÅŸayabilirsiniz.' 
            },

            // HAVA/YOL KOÅULLARI
            { 
                cat: 'hava', 
                title: 'Buzlanma Ä°kaz', 
                icon: 'â„ï¸', 
                level: 'warning', 
                desc: 'DÄ±ÅŸ sÄ±caklÄ±k Ã§ok dÃ¼ÅŸÃ¼k, yol buzlanmÄ±ÅŸ olabilir.', 
                action: 'HÄ±zÄ±nÄ±zÄ± dÃ¼ÅŸÃ¼rÃ¼n, ani fren ve direksiyon hareketlerinden kaÃ§Ä±nÄ±n.' 
            },
            { 
                cat: 'hava', 
                title: 'Ã–n Cam BuÄŸu', 
                icon: 'ğŸŒ«ï¸', 
                level: 'info', 
                desc: 'Ã–n cam buz Ã§Ã¶zÃ¼cÃ¼ aktif.', 
                action: 'Cam temizlenince kapatÄ±n, batarya tÃ¼ketimini azaltÄ±n.' 
            },
            { 
                cat: 'hava', 
                title: 'Arka Cam BuÄŸu', 
                icon: 'ğŸ”', 
                level: 'info', 
                desc: 'Arka cam buÄŸu Ã§Ã¶zme rezistansÄ± aktif.', 
                action: 'Cam temizlenince kapatÄ±n.' 
            },
            { 
                cat: 'hava', 
                title: 'Ã–n Cam YÄ±kama SÄ±vÄ±', 
                icon: 'ğŸ’§', 
                level: 'info', 
                desc: 'Cam yÄ±kama suyu azalmÄ±ÅŸ.', 
                action: 'Cam yÄ±kama suyu ekleyin.' 
            },
            { 
                cat: 'hava', 
                title: 'KÄ±ÅŸ Modu Ä°kaz', 
                icon: 'â›„', 
                level: 'info', 
                desc: 'AraÃ§ kÄ±ÅŸ modunda kullanÄ±lÄ±yor.', 
                action: 'Kaygan zeminde daha gÃ¼venli kalkÄ±ÅŸ saÄŸlar.' 
            },
            { 
                cat: 'hava', 
                title: 'YaÄŸmur ve IÅŸÄ±k SensÃ¶rÃ¼', 
                icon: 'ğŸŒ§ï¸', 
                level: 'info', 
                desc: 'YaÄŸmur ve Ä±ÅŸÄ±k sensÃ¶rÃ¼ aktif.', 
                action: 'Sistem otomatik olarak silecek ve farlarÄ± yÃ¶netir.' 
            },
            { 
                cat: 'hava', 
                title: 'Otomatik Ã–n Cam Silme', 
                icon: 'ğŸ§¹', 
                level: 'info', 
                desc: 'Ã–n cam silecekleri otomatik modda.', 
                action: 'Sistem yaÄŸmura gÃ¶re otomatik Ã§alÄ±ÅŸÄ±r.' 
            },

            // DÄ°ZEL ARAÃ‡LAR
            { 
                cat: 'dizel', 
                title: 'KÄ±zdÄ±rma Bujisi', 
                icon: 'ğŸ”¥', 
                level: 'info', 
                desc: 'Motor kÄ±zdÄ±rma bujileri Ä±sÄ±nÄ±yor.', 
                action: 'IÅŸÄ±k sÃ¶nene kadar motoru Ã§alÄ±ÅŸtÄ±rmayÄ±n.' 
            },
            { 
                cat: 'dizel', 
                title: 'YakÄ±t Filtresi Ä°kaz', 
                icon: 'ğŸš°', 
                level: 'warning', 
                desc: 'Dizel yakÄ±t filtresi dolu veya su var.', 
                action: 'YakÄ±t filtresini boÅŸaltÄ±n veya deÄŸiÅŸtirin.' 
            },
            { 
                cat: 'dizel', 
                title: 'Egzoz SÄ±vÄ±sÄ± Ä°kaz', 
                icon: 'ğŸ’§', 
                level: 'warning', 
                desc: 'Dizel egzoz sÄ±vÄ±sÄ± (AdBlue) seviyesi dÃ¼ÅŸÃ¼k.', 
                action: 'AdBlue ekleyin, biterse motor Ã§alÄ±ÅŸmayÄ± durdurabilir.' 
            },
            { 
                cat: 'dizel', 
                title: 'Su SÄ±vÄ±sÄ± Filtresi', 
                icon: 'ğŸ’¦', 
                level: 'warning', 
                desc: 'YakÄ±t filtresindeki su maksimum seviyede.', 
                action: 'Filtreden suyu boÅŸaltÄ±n.' 
            },
            { 
                cat: 'dizel', 
                title: 'DPF Dolu', 
                icon: 'ğŸš«', 
                level: 'warning', 
                desc: 'Dizel partikÃ¼l filtresi doldu.', 
                action: '20 dakika yÃ¼ksek devirde sÃ¼rÃ¼n veya serviste temizletin.' 
            },

            // DÄ°ÄER
            { 
                cat: 'motor', 
                title: 'DÃ¼ÅŸÃ¼k YakÄ±t Ä°kaz', 
                icon: 'â›½', 
                level: 'warning', 
                desc: 'YakÄ±t seviyesi Ã§ok dÃ¼ÅŸÃ¼k. Bitmek Ã¼zere.', 
                action: 'En yakÄ±n benzinliÄŸe gidin, en az 10 litre alÄ±n.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'YakÄ±t KapaÄŸÄ± Ä°kaz', 
                icon: 'â›½', 
                level: 'warning', 
                desc: 'YakÄ±t kapaÄŸÄ± aÃ§Ä±k kaldÄ±.', 
                action: 'YakÄ±t kapaÄŸÄ±nÄ± kapatÄ±n.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'AÃ§Ä±k KapÄ± Ä°kaz', 
                icon: 'ğŸšª', 
                level: 'warning', 
                desc: 'En az bir kapÄ± dÃ¼zgÃ¼n kapatÄ±lmamÄ±ÅŸ.', 
                action: 'TÃ¼m kapÄ±larÄ± kontrol edin ve kapatÄ±n.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'AÃ§Ä±k Kaput Ä°kaz', 
                icon: 'ğŸ”§', 
                level: 'warning', 
                desc: 'Kaput dÃ¼zgÃ¼n kapatÄ±lmamÄ±ÅŸ veya aÃ§Ä±k unutulmuÅŸ.', 
                action: 'Kaputu kontrol edin ve kapatÄ±n.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Anahtar AraÃ§ta DeÄŸil', 
                icon: 'ğŸ”‘', 
                level: 'info', 
                desc: 'AnahtarsÄ±z giriÅŸ sisteminde anahtar araÃ§ iÃ§inde deÄŸil.', 
                action: 'AnahtarÄ± aracÄ±n iÃ§ine getirin.' 
            },
            { 
                cat: 'motor', 
                title: 'DÃ¼ÅŸÃ¼k Anahtar Pili', 
                icon: 'ğŸ”‹', 
                level: 'warning', 
                desc: 'AraÃ§ anahtarÄ±nÄ±n pili azaldÄ±.', 
                action: 'Anahtar pilini deÄŸiÅŸtirin.' 
            },
            { 
                cat: 'motor', 
                title: 'Kontak AnahtarÄ± Ä°kaz', 
                icon: 'ğŸ—ï¸', 
                level: 'warning', 
                desc: 'Anahtar sisteminde veya anahtarda sorun var.', 
                action: 'AnahtarÄ± ve sistemini kontrol ettirin.' 
            },
            { 
                cat: 'motor', 
                title: 'Fan Ä°kaz LambasÄ±', 
                icon: 'ğŸŒ€', 
                level: 'info', 
                desc: 'HavalandÄ±rma fanÄ± Ã§alÄ±ÅŸÄ±yor.', 
                action: 'Normal Ã§alÄ±ÅŸma, mÃ¼dahale gerekmez.' 
            },
            { 
                cat: 'motor', 
                title: 'AraÃ§ Ä°Ã§i Hava SirkÃ¼lasyonu', 
                icon: 'ğŸ”„', 
                level: 'info', 
                desc: 'Ä°Ã§eriden hava sirkÃ¼lasyonu yapÄ±lÄ±yor.', 
                action: 'DÄ±ÅŸarÄ±sÄ± soÄŸuksa Ä±sÄ± kaybÄ±nÄ± Ã¶nler.' 
            },

            // GELÄ°ÅMÄ°Å SÄ°STEMLER
            { 
                cat: 'guvenlik', 
                title: 'Åerit KalkÄ±ÅŸ Ä°kaz', 
                icon: 'ğŸ›£ï¸', 
                level: 'warning', 
                desc: 'Sinyal vermeden ÅŸerit deÄŸiÅŸtirildi.', 
                action: 'Åerit deÄŸiÅŸtirirken sinyal verin.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Åerit YardÄ±mÄ± Ä°kaz', 
                icon: 'ğŸ›¡ï¸', 
                level: 'info', 
                desc: 'Åerit destek sistemi aÃ§Ä±k.', 
                action: 'Sistem ÅŸeritte kalmanÄ±za yardÄ±mcÄ± olur.' 
            },
            { 
                cat: 'motor', 
                title: 'ECO Mod Ä°kaz', 
                icon: 'ğŸŒ¿', 
                level: 'success', 
                desc: 'AraÃ§ ekonomik modda kullanÄ±lÄ±yor.', 
                action: 'YakÄ±t tÃ¼ketimi azalÄ±r, performans dÃ¼ÅŸebilir.' 
            },
            { 
                cat: 'motor', 
                title: 'HÄ±z Sabitleyici', 
                icon: 'ğŸ¯', 
                level: 'info', 
                desc: 'HÄ±z sabitleme sistemi etkin.', 
                action: 'AraÃ§ belirlenen hÄ±zda gider, gaz veya frene basÄ±nca devre dÄ±ÅŸÄ± kalÄ±r.' 
            },
            { 
                cat: 'motor', 
                title: 'Adaptif HÄ±z Sabitleyici', 
                icon: 'ğŸš˜', 
                level: 'info', 
                desc: 'Adaptif hÄ±z sabitleyici aktif.', 
                action: 'Ã–ndeki araca gÃ¶re hÄ±zÄ± otomatik ayarlar.' 
            },
            { 
                cat: 'motor', 
                title: 'HÄ±z SÄ±nÄ±rlayÄ±cÄ±', 
                icon: 'ğŸ“‰', 
                level: 'info', 
                desc: 'HÄ±z sÄ±nÄ±rlandÄ±rÄ±cÄ± fonksiyonu aktif.', 
                action: 'AraÃ§ belirlenen hÄ±zÄ± aÅŸamaz.' 
            },
            { 
                cat: 'motor', 
                title: 'YokuÅŸ Ä°niÅŸ KontrolÃ¼', 
                icon: 'â›°ï¸', 
                level: 'info', 
                desc: 'YokuÅŸ inerken hÄ±zÄ± koruyan sistem aktif.', 
                action: 'Sistem otomatik frenleme yapar.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Otomatik Park Pilotu', 
                icon: 'ğŸ…¿ï¸', 
                level: 'info', 
                desc: 'Park pilotu asistanÄ± aktif.', 
                action: 'Sistem park etmenize yardÄ±mcÄ± olur.' 
            },
            { 
                cat: 'guvenlik', 
                title: 'Acil Durum Fren Sistemi', 
                icon: 'ğŸ†˜', 
                level: 'warning', 
                desc: 'Acil durum fren sistemi kapatÄ±ldÄ± veya sensÃ¶r engellendi.', 
                action: 'SensÃ¶rÃ¼ temizleyin veya sistemi aktif edin.' 
            },
            { 
                cat: 'mekanik', 
                title: 'Arka Spoiler Ä°kaz', 
                icon: 'âœˆï¸', 
                level: 'warning', 
                desc: 'Arka rÃ¼zgarlÄ±k sisteminde arÄ±za.', 
                action: 'Spoiler sistemini kontrol ettirin.' 
            },
            { 
                cat: 'mekanik', 
                title: 'Ã‡atÄ± Ä°kaz LambasÄ±', 
                icon: 'ğŸŒ…', 
                level: 'warning', 
                desc: 'Cabrio araÃ§larda tavan sisteminde arÄ±za.', 
                action: 'Tavan aÃ§ma/kapama sistemini kontrol ettirin.' 
            },
            { 
                cat: 'mekanik', 
                title: 'Dorse Ã‡eki Demiri', 
                icon: 'ğŸš›', 
                level: 'warning', 
                desc: 'RÃ¶mork Ã§ekme kancasÄ±nÄ±n kilidi aÃ§Ä±k.', 
                action: 'KancanÄ±n kilidini kontrol edin ve kapatÄ±n.' 
            },
            { 
                cat: 'motor', 
                title: 'Bilgi Ä°kaz LambasÄ±', 
                icon: 'â„¹ï¸', 
                level: 'info', 
                desc: 'BazÄ± uyarÄ±lar hakkÄ±nda bilgi verir.', 
                action: 'Ekrana dokunarak uyarÄ± sebebini gÃ¶rebilirsiniz.' 
            }
        ];

        // Arama ve filtreleme
        let currentFilter = 'all';
        
        function renderLights(filter = 'all', searchTerm = '') {
            const grid = document.getElementById('lightsGrid');
            let filteredData = arÄ±zaData;
            
            // Kategori filtreleme
            if (filter !== 'all') {
                filteredData = arÄ±zaData.filter(item => item.cat === filter);
            }
            
            // Arama filtreleme
            if (searchTerm) {
                const term = searchTerm.toLowerCase();
                filteredData = filteredData.filter(item => 
                    item.title.toLowerCase().includes(term) || 
                    item.desc.toLowerCase().includes(term) ||
                    item.action.toLowerCase().includes(term)
                );
            }
            
            // Ä°statistik gÃ¼ncelle
            updateStats(filteredData);
            
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            grid.innerHTML = filteredData.map(item => {
                let levelClass = '';
                let levelText = '';
                switch(item.level) {
                    case 'critical': levelClass = 'level-critical'; levelText = 'KRÄ°TÄ°K'; break;
                    case 'danger': levelClass = 'level-danger'; levelText = 'TEHLÄ°KE'; break;
                    case 'warning': levelClass = 'level-warning'; levelText = 'UYARI'; break;
                    case 'info': levelClass = 'level-info'; levelText = 'BÄ°LGÄ°'; break;
                    case 'success': levelClass = 'level-success'; levelText = 'ECO'; break;
                }
                
                const bgColor = isDarkMode ? 'bg-gray-800' : 'bg-white';
                const textColor = isDarkMode ? 'text-white' : 'text-gray-800';
                const borderColor = isDarkMode ? 'border-gray-700' : 'border-gray-200';
                const descColor = isDarkMode ? 'text-gray-400' : 'text-gray-600';
                const hoverColor = isDarkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-50';
                
                return `
                    <div class="light-card ${bgColor} ${textColor} p-4 rounded-xl border ${borderColor} ${hoverColor}" onclick="openDetailModal(${JSON.stringify(item).replace(/"/g, '&quot;')})">
                        <div class="flex items-start justify-between">
                            <span class="text-3xl">${item.icon}</span>
                            <span class="${levelClass} px-2 py-1 rounded text-xs font-bold">${levelText}</span>
                        </div>
                        <h3 class="font-black text-sm mt-3 mb-1">${item.title}</h3>
                        <p class="text-xs ${descColor} line-clamp-2">${item.desc}</p>
                        <div class="mt-3 text-xs text-blue-600 dark:text-blue-400 font-semibold">Detay iÃ§in tÄ±kla â†’</div>
                    </div>
                `;
            }).join('');
        }

        function updateStats(data) {
            const total = data.length;
            const critical = data.filter(item => item.level === 'critical').length;
            const warning = data.filter(item => item.level === 'warning' || item.level === 'danger').length;
            
            document.getElementById('totalCount').textContent = total;
            document.getElementById('criticalCount').textContent = critical;
            document.getElementById('warningCount').textContent = warning;
        }

        function filterLights(category) {
            currentFilter = category;
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-600', 'text-white');
                const isDarkMode = document.body.classList.contains('dark-mode');
                btn.classList.add(isDarkMode ? 'bg-gray-800' : 'bg-gray-100', isDarkMode ? 'text-gray-300' : 'text-gray-800');
            });
            
            event.target.classList.add('active', 'bg-blue-600', 'text-white');
            event.target.classList.remove('bg-gray-100', 'bg-gray-800', 'text-gray-300', 'text-gray-800');
            
            const searchTerm = document.getElementById('searchInput').value;
            renderLights(category, searchTerm);
        }

        // Arama iÅŸlevi
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value;
            renderLights(currentFilter, searchTerm);
        });

        function openDetailModal(item) {
            document.getElementById('modalIcon').textContent = item.icon;
            document.getElementById('modalTitle').textContent = item.title;
            document.getElementById('modalDesc').textContent = item.desc;
            document.getElementById('modalAction').textContent = item.action;
            
            const levelSpan = document.getElementById('modalLevel');
            let levelText = '';
            switch(item.level) {
                case 'critical': levelText = 'KRÄ°TÄ°K ARIZA'; levelSpan.className = 'level-critical px-3 py-1 rounded-full text-xs font-bold'; break;
                case 'danger': levelText = 'TEHLÄ°KELÄ°'; levelSpan.className = 'level-danger px-3 py-1 rounded-full text-xs font-bold'; break;
                case 'warning': levelText = 'UYARI'; levelSpan.className = 'level-warning px-3 py-1 rounded-full text-xs font-bold'; break;
                case 'info': levelText = 'BÄ°LGÄ°'; levelSpan.className = 'level-info px-3 py-1 rounded-full text-xs font-bold'; break;
                case 'success': levelText = 'ECO MOD'; levelSpan.className = 'level-success px-3 py-1 rounded-full text-xs font-bold'; break;
            }
            levelSpan.textContent = levelText;
            
            document.getElementById('detailModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('detailModal').classList.add('hidden');
        }

        // Modal dÄ±ÅŸÄ±na tÄ±klama
        window.onclick = function(event) {
            if (event.target.id === 'detailModal' || event.target.id === 'loginModal' || 
                event.target.id === 'registerModal' || event.target.id === 'profileModal') {
                closeAllModals();
            }
        }

        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            renderLights();
            updateUI();
            
            // Demo kullanÄ±cÄ± ekle (test iÃ§in)
            if (users.length === 0) {
                users.push({
                    id: 1,
                    name: 'Demo KullanÄ±cÄ±',
                    email: 'demo@otoanaliz.com',
                    password: '123456',
                    phone: '5551234567',
                    createdAt: new Date().toISOString()
                });
                localStorage.setItem(STORAGE_KEYS.USERS, JSON.stringify(users));
            }
        });
    </script>
</body>
</html>